!function(r,e){"object"==typeof exports&&"object"==typeof module?module.exports=e():"function"==typeof define&&define.amd?define("quick-pivot",[],e):"object"==typeof exports?exports["quick-pivot"]=e():r["quick-pivot"]=e()}(this,function(){return function(r){function e(n){if(t[n])return t[n].exports;var o=t[n]={exports:{},id:n,loaded:!1};return r[n].call(o.exports,o,o.exports,e),o.loaded=!0,o.exports}var t={};return e.m=r,e.c=t,e.p="",e(0)}([function(r,e,t){"use strict";r.exports=t(1)},function(r,e){"use strict";function t(r,e,t){return e in r?Object.defineProperty(r,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):r[e]=t,r}function n(r){return Array.isArray(r)&&r.length?"object"!==l(r[0])||Array.isArray(r[0])?r.reduce(function(r,e,n,o){return 0!==n&&(Array.isArray(e)?r.push(e.reduce(function(r,e,t){return r[o[0][t]]=e,r},{})):r.push(t({},o[0],e))),r},[]):r:[]}function o(r,e){return r.reduce(function(r,t){var n=t[e];return r[n]||(r[n]=[]),r[n].push(t),r},{})}function i(r){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],t=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};if(!r.length)return[];if(e=e.filter(function(e){return e in r[0]}),!e.length)return r;for(var n=Object.assign([],e),u=o(r,n.shift()),a=Object.keys(u),c=a.map(function(r){return u[r]}),f=0;f<c.length;f++)t[a[f]]=n.length?{}:[],t[a[f]]=i(c[f],n,t[a[f]]);return t}function u(r){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],t=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"";if(!e.length)return{columnHeaders:[t],mapToHeader:1};var n=i(r,e),o=[],u=Object.assign({},n),a=1;return function c(r){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=arguments[2];if("object"!==("undefined"==typeof r?"undefined":l(r))||Array.isArray(r))return 1;for(var i=Object.keys(r),u=0,f=0;f<i.length;f++){var s=c(r[i[f]],e+1,n[i[f]]);Array.isArray(r[i[f]])&&(n[i[f]]=a,a+=1),u+=s,o[e]=o[e]?o[e].concat(Array(s).fill(i[f])):[t].concat(Array(s).fill(i[f]))}return u}(n,0,u),{columnHeaders:o,mapToHeader:u}}function a(r,e,t,n){return e||"function"==typeof t?"function"==typeof e&&(n=t||0,t=e):t="count",r.reduce(function(r,n,o,i){if("function"==typeof t)return t(r,"string"==typeof e?n[e]:n,o,i);switch(t){case"sum":return r+=Number(n[e]);case"count":return r+=1;default:return r+=1}},n||0)}function c(r,e){var t=[];if(e.forEach(function(e){r.indexOf(e)===-1&&t.push(e)}),t.length)throw new Error("Check that these selected pivot categories exist: "+t.join(","))}function f(r){function e(r){var t=function(t){Array.isArray(r[t])?(u=i(r[t],o),function n(r,e){if(Array.isArray(r))if(t===m){var o=g[g.length-1];o[e]=a(r,f,l),g[g.length-1]=o;var i=v[v.length-1];i[e]=r,v[v.length-1]=i}else{m=t;var u=[t].concat(Array(e-1).fill(""),a(r,f,l),Array(h-(e+1)).fill("")),c=[t].concat(Array(e-1).fill(""),[r],Array(h-(e+1)).fill(""));v.push(c),g.push(u)}else for(var s in r)n(r[s],e[s])}(u,d||1)):(g.push([t].concat(Array(h-1).fill(""))),e(r[t],t))};for(var n in r){var u;t(n)}}var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],f=arguments[3],l=arguments[4],s=arguments[5];if(r=n(r),!r.length)return[];c(Object.keys(r[0]),t),c(Object.keys(r[0]),o),"undefined"==typeof s&&(s="function"!=typeof f?l+" "+f:"Custom Agg");var y=u(r,o,s),p=Array.isArray(y.columnHeaders[0])?y.columnHeaders:[y.columnHeaders.concat(s)],d=y.mapToHeader,h=p[0].length,g=[],v=[],m="";return t.length||o.length?e(i(r,t.length?t:o)):(g.push([s,a(r,f,l)]),v=r),{table:p.concat(g),rawData:v}}var l="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(r){return typeof r}:function(r){return r&&"function"==typeof Symbol&&r.constructor===Symbol&&r!==Symbol.prototype?"symbol":typeof r};r.exports={tableCreator:f,fixDataFormat:n,groupByCategory:o,groupByCategories:i,createColumnHeaders:u,accumulator:a,checkPivotCategories:c}}])});
//# sourceMappingURL=quick-pivot.min.js.map