!function(e,t){"object"==typeof exports&&"object"==typeof module?module.exports=t():"function"==typeof define&&define.amd?define("quick-pivot",[],t):"object"==typeof exports?exports["quick-pivot"]=t():e["quick-pivot"]=t()}(this,function(){return function(e){function t(a){if(r[a])return r[a].exports;var n=r[a]={exports:{},id:a,loaded:!1};return e[a].call(n.exports,n,n.exports,t),n.loaded=!0,n.exports}var r={};return t.m=e,t.c=r,t.p="",t(0)}([function(e,t,r){"use strict";function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var n=function(){function e(e,t){for(var r=0;r<t.length;r++){var a=t[r];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(t,r,a){return r&&e(t.prototype,r),a&&e(t,a),t}}(),o=r(1),i=r(2),l=function(){function e(t,r,n,i,l,u){a(this,e),t?this.originalData=(0,o.tableCreator)(t,r,n,i,l,u):this.originalData={},this.data=this.originalData,this.collapsedRows={}}return n(e,[{key:"update",value:function(e,t,r,a,n,i){return this.originalData=(0,o.tableCreator)(e,t,r,a,n,i),this.data=this.originalData,this}},{key:"collapse",value:function(e){var t=(0,i.collapse)(e,this.data);return this.collapsedRows[this.data.table[e].row]=t.collapsed,this.data=t.uncollapsed,this}},{key:"expand",value:function(e){return this.data=(0,i.expand)(e,this.data,this.collapsedRows[this.data.table[e].row]),delete this.collapsedRows[this.data.table[e].row],this}},{key:"getData",value:function(e){return this.data.table[e]?this.collapsedRows[this.data.table[e].row]?this.collapsedRows[this.data.table[e].row].rawData:this.originalData.rawData[this.data.table[e].row]:null}}]),e}();t["default"]=l,e.exports=t["default"]},function(e,t){"use strict";function r(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function a(e){return Array.isArray(e)&&e.length?"object"!==s(e[0])||Array.isArray(e[0])?e.reduce(function(e,t,a,n){return 0!==a&&(Array.isArray(t)?e.push(t.reduce(function(e,t,r){return e[n[0][r]]=t,e},{})):e.push(r({},n[0],t))),e},[]):e:[]}function n(e,t){return e.reduce(function(e,r){var a=r[t];return e[a]||(e[a]=[]),e[a].push(r),e},{})}function o(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};if(!e.length)return[];if(t=t.filter(function(t){return t in e[0]}),!t.length)return e;for(var a=Object.assign([],t),i=n(e,a.shift()),l=Object.keys(i),u=l.map(function(e){return i[e]}),c=0;c<u.length;c++)r[l[c]]=a.length?{}:[],r[l[c]]=o(u[c],a,r[l[c]]);return r}function i(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"";if(!t.length)return{columnHeaders:[r],mapToHeader:1};var a=o(e,t),n=[],i=Object.assign({},a),l=1;return function u(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,a=arguments[2];if("object"!==("undefined"==typeof e?"undefined":s(e))||Array.isArray(e))return 1;for(var o=Object.keys(e),i=0,c=0;c<o.length;c++){var f=u(e[o[c]],t+1,a[o[c]]);Array.isArray(e[o[c]])&&(a[o[c]]=l,l+=1),i+=f,n[t]=n[t]?n[t].concat(Array(f).fill(o[c])):[r].concat(Array(f).fill(o[c]))}return i}(a,0,i),{columnHeaders:n,mapToHeader:i}}function l(e,t,r,a){return t||"function"==typeof r?"function"==typeof t&&(a=r||0,r=t):r="count",e.reduce(function(a,n,o,i){if("function"==typeof r)return r(a,"string"==typeof t?n[t]:n,o,i);switch(r){case"average":return a+=Number(n[t])/e.length;case"count":return a+=1;case"min":return 0===o?a=Number(n[t]):n[t]<a&&(a=Number(n[t])),a;case"max":return 0===o?a=Number(n[t]):n[t]>a&&(a=Number(n[t])),a;case"sum":return a+=Number(n[t]);default:return a+=1}},a||0)}function u(e,t){var r=[];if(t.forEach(function(t){e.indexOf(t)===-1&&r.push(t)}),r.length)throw new Error("Check that these selected pivot categories exist: "+r.join(","))}function c(e){function t(e,r){var a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],i=function(i){if(Array.isArray(e[i])){var u=o(e[i],n);w="",function h(e,t){if(Array.isArray(e))if(i===w){var a=b[b.length-1].value;a[t]=l(e,c,s),b[b.length-1].value=a;var n=g[g.length-1].value;n[t]=e,g[g.length-1].value=n}else{w=i;var o=[i].concat(Array(t-1).fill(""),l(e,c,s),Array(y-(t+1)).fill("")),u=[i].concat(Array(t-1).fill(""),[e],Array(y-(t+1)).fill(""));g.push({value:u,type:"data",depth:r}),b.push({value:o,type:"data",depth:r,row:b.length+v.length})}else for(var f in e)h(e[f],t[f])}(u,d||1)}else{var f=a.shift(),p=f?f.value:[i].concat(Array(y-1).fill(""));b.push({value:p,depth:r,type:"rowHeader",row:b.length+v.length}),g.push({value:p,depth:r,type:"rowHeader"}),t(e[i],r+1,a)}};for(var u in e)i(u)}var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],c=arguments[3],s=arguments[4],f=arguments[5];if(e=a(e),!e.length)return[];u(Object.keys(e[0]),r),u(Object.keys(e[0]),n),"undefined"==typeof f&&(f="function"!=typeof c?s+" "+c:"Custom Agg");var p=i(e,n,f),h=Array.isArray(p.columnHeaders[0])?p.columnHeaders:[p.columnHeaders.concat(f)],d=p.mapToHeader,y=h[0].length,v=h.map(function(e,t){return{value:e,depth:t,type:"colHeader",row:t}}),b=[],g=[],w="",m=[];if(r.length>0)for(var A=0;A<r.length;A++)t(o(e,r.slice(0,A+1)),0,m),m=Object.assign([],b),A+1<r.length&&(b=[],g=[],w="");else if(n.length>0)for(var D=0;D<n.length;D++)t(o(e,n.slice(0,D+1)),0,m),m=Object.assign([],b),D+1<n.length&&(b=[],g=[],w="");else b.push({value:[f,l(e,c,s)],type:"data",row:1,depth:0}),g=e.map(function(e){return{value:e,type:0,row:1,depth:0}});return{table:v.concat(b),rawData:v.concat(g)}}Object.defineProperty(t,"__esModule",{value:!0});var s="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};t.fixDataFormat=a,t.groupByCategory=n,t.groupByCategories=o,t.createColumnHeaders=i,t.accumulator=l,t.checkPivotCategories=u,t.tableCreator=c},function(e,t){"use strict";function r(e){if(Array.isArray(e)){for(var t=0,r=Array(e.length);t<e.length;t++)r[t]=e[t];return r}return Array.from(e)}function a(e,t){var r=t.table[e],a=r.type,n=r.depth;if("rowHeader"!==a&&"colHeader"!==a)return{uncollapsed:t};for(var o=e+1,i=t.table[o].depth,l={table:t.table.slice(0,o),rawData:t.rawData.slice(0,o)},u={table:[],rawData:[]};o<t.table.length&&i>n;)u.rawData.push(t.rawData[o]),u.table.push(t.table[o]),o+=1,o<t.table.length&&(i=t.table[o].depth);return l.table=l.table.concat(t.table.slice(o)),l.rawData=l.rawData.concat(t.rawData.slice(o)),{uncollapsed:l,collapsed:u}}function n(e,t,a){var n,o;return a?((n=t.table).splice.apply(n,[e+1,0].concat(r(a.table))),(o=t.rawData).splice.apply(o,[e+1,0].concat(r(a.rawData))),t):t}Object.defineProperty(t,"__esModule",{value:!0}),t.collapse=a,t.expand=n}])});
//# sourceMappingURL=quick-pivot.min.js.map